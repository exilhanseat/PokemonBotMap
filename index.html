<html>
    <head>
        <meta charset="utf-8" />
        <title>Raid Map</title>
        <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
        <link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css" rel="stylesheet" />
        <script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
        
        <link href="css/style.css" rel="stylesheet" />
        <script type="text/javascript" src="js/constants.js.php"></script>
        <script type="text/javascript" src="js/map.js"></script>
    </head>
    <body>
        <div id="map">
	        <div class="mapboxgl-ctrl-top-right">
		        <div id="layer_settings" class="mapboxgl-ctrl mapboxgl-ctrl-group">
		        	<ul>
		        		<li>
				        	<input id="style_streets" value="streets-v10" type="radio" name="style" checked="checked" />
				        	<label for="style_streets">Streets</label>
			        	</li>
		        		<li>
				        	<input id="style_outdoors" value="outdoors-v10" type="radio" name="style" />
				        	<label for="style_outdoors">Outdoors</label>
			        	</li>
		        		<li>
				        	<input id="style_light" value="light-v9" type="radio" name="style" />
				        	<label for="style_light">Light</label>
			        	</li>
		        		<li>
				        	<input id="style_dark" value="dark-v9" type="radio" name="style" />
				        	<label for="style_dark">Dark</label>
			        	</li>
		        		<li>
				        	<input id="style_satellite" value="satellite-v9" type="radio" name="style" />
				        	<label for="style_satellite">Sattelite</label>
			        	</li>
		        		<li>
				        	<input id="style_satellite_streets" value="satellite-streets-v10" type="radio" name="style" />
				        	<label for="style_satellite_streets">Sattelite Streets</label>
			        	</li>
			        	<li>
			        		<hr />
			        	</li>
			        	<li>
			        		<input id="layer_exraids" value="show_exraids" type="checkbox" name="layer_exraids" checked="checked" />
			        		<label for="layer_exraids">EX Raids</label>
			        	</li>
			        	<li>
			        		<input id="layer_raids5" value="show_raids5" type="checkbox" name="layer_raids5" checked="checked" />
			        		<label for="layer_raids5">Level 5</label>
			        	</li>
			        	<li>
			        		<input id="layer_raids4" value="show_raids4" type="checkbox" name="layer_raids4" checked="checked" />
			        		<label for="layer_raids4">Level 4</label>
			        	</li>
			        	<li>
			        		<input id="layer_raids3" value="show_raids3" type="checkbox" name="layer_raids3" checked="checked" />
			        		<label for="layer_raids3">Level 3</label>
			        	</li>
			        	<li>
			        		<input id="layer_raids2" value="show_raids2" type="checkbox" name="layer_raids2" checked="checked" />
			        		<label for="layer_raids2">Level 2</label>
			        	</li>
			        	<li>
			        		<input id="layer_raids1" value="show_raids1" type="checkbox" name="layer_raids1" checked="checked" />
			        		<label for="layer_raids1">Level 1</label>
			        	</li>
			        	<li>
			        		<input id="layer_exgyms" value="show_exgyms" type="checkbox" name="layer_exgyms" checked="checked" />
			        		<label for="layer_exgyms">EX Gyms</label>
			        	</li>
			        	<li>
			        		<input id="layer_gyms" value="show_gyms" type="checkbox" name="layer_gyms" checked="checked" />
			        		<label for="layer_gyms">Other Gyms</label>
			        	</li>
			        	<li>
			        		<input id="layer_pokemon" value="show_pokemon" type="checkbox" name="layer_pokemon" checked="checked" />
			        		<label for="layer_pokemon">Pok√©mon</label>
			        	</li>
		        	</ul>
		        </div>
	        </div>
        </div>
    </body>
</html>
<!--






<script>

map.on('load', function() {
 
    map.addLayer({
        "id": "gyms",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                    <?php 
                    ob_start();
                    include "getgyms.php";
                    $json = ob_get_clean();
                    $data = json_decode( $json );
                    foreach( $data as $item ) {
                        $icon = 'gym';
                        if( stripos( $item->gym_name, MAP_EX_IDENT ) !== false ){
                            $icon = 'ex' . $icon;
                        }
                        $gym_info = "<div style='font-size: 18px; color: #0078A8;'>" . htmlspecialchars($item->gym_name) . "</div>";
						$gym_info .= "<div style='font-size: 12px;'><a href='https://www.google.com/maps/search/?api=1&query=$item->lat,$item->lon' target='_blank' title='Click to find " . htmlspecialchars( $item->gym_name ) . " on Google Maps'>$item->address</a></div>&nbsp;<br />";
						
						$no_raids = "<div style='font-size: 12px;'>Geen raid bekend op deze gym<br/>Zie je een raid, meld hem aan.<br/>via de telegram bot.</div>";
						
						$output = "<div style='text-align: center; margin-left: auto; margin-right: auto;'>$gym_info $no_raids</div>";
                        echo '
                            {
                                "type": "Feature",
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [' . $item->lon . ', ' . $item->lat . ' ]
                                },
                                "properties": {
                                    "description": "' . $output . '",
                                    "icon": "' . $icon . '"
                                }
                            },
                        ';
                    } ?>
                ]
            }
        },
        "layout": {
            "icon-image": "{icon}",
            "text-field": "{title}",
            "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
            "text-offset": [0, 0.6],
            "text-anchor": "top"
        }
    });
    
    map.addLayer({
        "id": "stops",
        "type": "symbol",
        "source": {
            "type": "geojson",
            "data": {
                "type": "FeatureCollection",
                "features": [
                    <?php 
                    ob_start();
                    include "getpokestop.php";
                    $json = ob_get_clean();
                    $data = json_decode( $json );
                    foreach( $data as $item ) {
                        $pokename = htmlspecialchars($item->pokestop_name);
						$stop_info = "<div style='font-size: 18px; color: #0078A8;'>" . htmlspecialchars($item->pokestop_name) . "</div>";
						$stop_info .= "<div style='font-size: 12px;'><a href='https://www.google.com/maps/search/?api=1&query=$item->lat,$item->lon' target='_blank' title='Click to find " . htmlspecialchars( $item->pokestop_name ) . " on Google Maps'>$item->address</a></div>&nbsp;<br />";
						
						$no_quests = "<div style='font-size: 12px;'>Geen quest bekend op deze Pokestop<br/>Zie je een quest, meld hem aan.<br/>via de telegram bot.</div>";
						
						$output = "<div style='text-align: center; margin-left: auto; margin-right: auto;'>$stop_info $no_quests</div>";
                        echo '
                            {
                                "type": "Feature",
                                "geometry": {
                                    "type": "Point",
                                    "coordinates": [' . $item->lon . ', ' . $item->lat . ' ]
                                },
                                "properties": {
                                    "description": "' . $output . '",
                                    "icon": "poke"
                                }
                            },
                        ';
                    } ?>
                ]
            }
        },
        "layout": {
            "icon-image": "{icon}",
            "text-field": "{title}",
            "text-font": ["Open Sans Semibold", "Arial Unicode MS Bold"],
            "text-offset": [0, 0.6],
            "text-anchor": "top"
        }
    });
    
    map.on('click', 'gyms', function (e) {
        var coordinates = e.features[0].geometry.coordinates.slice();
        var description = e.features[0].properties.description;

        // Ensure that if the map is zoomed out such that multiple
        // copies of the feature are visible, the popup appears
        // over the copy being pointed to.
        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
        }

        new mapboxgl.Popup()
            .setLngLat(coordinates)
            .setHTML(description)
            .addTo(map);
    });
    
    
    // Change the cursor to a pointer when the mouse is over the places layer.
    map.on('mouseenter', 'gyms', function () {
        map.getCanvas().style.cursor = 'pointer';
    });

    // Change it back to a pointer when it leaves.
    map.on('mouseleave', 'gyms', function () {
        map.getCanvas().style.cursor = '';
    });
    
    map.on('click', 'stops', function (e) {
        var coordinates = e.features[0].geometry.coordinates.slice();
        var description = e.features[0].properties.description;

        // Ensure that if the map is zoomed out such that multiple
        // copies of the feature are visible, the popup appears
        // over the copy being pointed to.
        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
        }

        new mapboxgl.Popup()
            .setLngLat(coordinates)
            .setHTML(description)
            .addTo(map);
    });
    
    
    // Change the cursor to a pointer when the mouse is over the places layer.
    map.on('mouseenter', 'stops', function () {
        map.getCanvas().style.cursor = 'pointer';
    });

    // Change it back to a pointer when it leaves.
    map.on('mouseleave', 'stops', function () {
        map.getCanvas().style.cursor = '';
    });
    
});

var toggleableLayerIds = [ 'gyms', 'stops' ];

for (var i = 0; i < toggleableLayerIds.length; i++) {
    var id = toggleableLayerIds[i];

    var link = document.createElement('a');
    link.href = '#';
    link.className = 'active';
    link.textContent = id;

    link.onclick = function (e) {
        var clickedLayer = this.textContent;
        e.preventDefault();
        e.stopPropagation();

        var visibility = map.getLayoutProperty(clickedLayer, 'visibility');

        if (visibility === 'visible') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
            this.className = '';
        } else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
        }
    };

    var layers = document.getElementById('menu');
    layers.appendChild(link);
}


</script>

</body>
</html>-->